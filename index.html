<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态文件结构浏览器</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            color: white;
            animation: fadeIn 1s ease;
        }

        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        .main-content {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.93);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .file-tree-container {
            flex: 1;
        }

        .file-tree-header {
            background: #2c3e50;
            color: white;
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .controls {
            display: flex;
            gap: 15px;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 18px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
            background: #2980b9;
        }

        .btn i {
            font-size: 16px;
        }

        .search-box {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            width: 300px;
        }

        .search-box input {
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            width: 100%;
            outline: none;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .file-tree {
            padding: 20px;
            min-height: 600px;
            max-height: 600px;
            overflow-y: auto;
        }

        .folder, .file {
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            user-select: none;
        }

        .folder:hover, .file:hover {
            background: #f0f7ff;
        }

        .folder {
            font-weight: 600;
            color: #2c3e50;
        }

        .file {
            color: #555;
            margin-left: 35px;
        }

        .folder i {
            color: #f39c12;
            font-size: 18px;
        }

        .file i {
            color: #3498db;
            font-size: 16px;
        }

        .folder-content {
            margin-left: 35px;
            display: none;
        }

        .expanded {
            display: block;
        }

        .toggle {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .toggle:hover {
            background: #e0e0e0;
        }

        .file-details {
            width: 300px;
        }

        .file-details-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .file-info {
            padding: 25px;
        }

        .info-item {
            margin-bottom: 20px;
        }

        .info-item h3 {
            font-size: 16px;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .info-item p {
            font-size: 18px;
            color: #2c3e50;
            font-weight: 500;
        }

        .file-icon {
            font-size: 50px;
            text-align: center;
            margin: 20px 0;
            color: #3498db;
        }

        .file-preview {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            margin-top: 20px;
            border: 1px dashed #ddd;
            color: #7f8c8d;
            font-style: italic;
        }

        .file-type {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 13px;
            background: #e1f0fa;
            color: #3498db;
            font-weight: 500;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item .number {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
        }

        .stat-item .label {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
            font-size: 15px;
        }

        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb span {
            margin: 0 8px;
            color: #95a5a6;
        }

        .loading {
            color: #95a5a6;
            font-style: italic;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .folder.collapsed > .toggle i {
            transform: rotate(0deg);
        }

        .folder.expanded > .toggle i {
            transform: rotate(90deg);
        }

        .empty-folder {
            color: #95a5a6;
            font-style: italic;
            margin-left: 35px;
            padding: 8px 0;
        }

        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
            }

            .file-details {
                width: 100%;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1><i class="fas fa-folder-tree"></i> 动态文件结构浏览器</h1>
        <p>浏览、搜索和管理您的文件结构，支持实时预览和详细信息展示</p>
    </header>

    <div class="main-content">
        <div class="panel file-tree-container">
            <div class="file-tree-header">
                <div class="controls">
                    <button class="btn" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i> 刷新
                    </button>
                    <button class="btn" id="expandAllBtn">
                        <i class="fas fa-expand-alt"></i> 全部展开
                    </button>
                    <button class="btn" id="collapseAllBtn">
                        <i class="fas fa-compress-alt"></i> 全部折叠
                    </button>
                </div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="搜索文件或文件夹...">
                </div>
            </div>

            <div class="breadcrumb">
                <a href="#" class="path-link" data-path="/">根目录</a>
            </div>

            <div class="file-tree" id="fileTree">
                <div class="loading">
                    <i class="fas fa-spinner"></i> 正在加载文件结构...
                </div>
            </div>
        </div>

        <div class="panel file-details">
            <div class="file-details-header">
                <h2>文件信息</h2>
            </div>
            <div class="file-info">
                <div class="file-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="info-item">
                    <h3>文件名</h3>
                    <p id="fileName">选择文件查看详细信息</p>
                </div>
                <div class="info-item">
                    <h3>类型</h3>
                    <p id="fileType">-</p>
                </div>
                <div class="info-item">
                    <h3>大小</h3>
                    <p id="fileSize">-</p>
                </div>
                <div class="info-item">
                    <h3>修改日期</h3>
                    <p id="fileModified">-</p>
                </div>

                <div class="file-preview">
                    <p id="previewText">选择文件可预览内容</p>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="number" id="folderCount">0</div>
                        <div class="label">文件夹</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="fileCount">0</div>
                        <div class="label">文件</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="totalSize">0KB</div>
                        <div class="label">总大小</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // 文件结构数据
    const fileStructure = {
        name: "项目文件",
        type: "folder",
        path: "/",
        children: [
            {
                name: "文档",
                type: "folder",
                path: "/docs",
                children: [
                    {
                        name: "项目计划书.docx",
                        type: "file",
                        size: "1.2MB",
                        modified: "2023-05-10",
                        content: "项目概述：开发一个现代化的文件浏览器，支持动态加载文件结构，实时预览文件内容，并提供直观的用户界面。\n\n项目目标：\n- 实现文件树状结构展示\n- 支持文件内容预览\n- 提供搜索功能\n- 响应式设计适应不同设备"
                    },
                    {
                        name: "需求分析.pdf",
                        type: "file",
                        size: "2.3MB",
                        modified: "2023-05-12",
                        content: "功能需求：\n1. 文件浏览：树状结构展示文件和文件夹\n2. 文件预览：支持常见文件类型的预览\n3. 搜索功能：支持实时过滤文件和文件夹\n4. 文件信息：显示文件详细信息（大小、修改日期等）\n5. 响应式设计：适配桌面和移动设备"
                    },
                    {
                        name: "会议记录",
                        type: "folder",
                        path: "/docs/meetings",
                        children: [
                            {
                                name: "2023-04-01.txt",
                                type: "file",
                                size: "0.3MB",
                                modified: "2023-04-01",
                                content: "会议主题：项目启动会议\n\n参会人员：张三、李四、王五\n\n会议内容：\n- 确定项目目标\n- 分配任务\n- 制定时间表\n- 确定技术栈"
                            }
                        ]
                    }
                ]
            },
            {
                name: "源代码",
                type: "folder",
                path: "/src",
                children: [
                    {
                        name: "index.html",
                        type: "file",
                        size: "4.7KB",
                        modified: "2023-05-15",
                        content: "<!DOCTYPE html>\n<html>\n<head>\n  <title>文件浏览器</title>\n  <meta charset=\"UTF-8\">\n  <link rel=\"stylesheet\" href=\"styles.css\">\n</head>\n<body>\n  <div id=\"app\"></div>\n  <script src=\"main.js\"></script>
\n
</body>
\n
</html>"
},
{
name: "styles.css",
type: "file",
size: "8.2KB",
modified: "2023-05-16",
content: "/* 全局样式 */\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background-color: #f5f7fa;\n  margin: 0;\n  padding: 0;\n}\n\n/* 文件树样式 */\n.file-tree {\n  padding: 15px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n}"
},
{
name: "main.js",
type: "file",
size: "15.8KB",
modified: "2023-05-18",
content: "// 主应用逻辑\nclass FileBrowser {\n  constructor() {\n    this.fileTree = document.getElementById('fileTree');\n    this.searchInput = document.getElementById('searchInput');\n    this.init();\n  }\n\n  init() {\n    this.loadFileStructure();\n    this.setupEventListeners();\n  }\n\n  loadFileStructure() {\n    // 从服务器加载文件结构\n  }\n}"
},
{
name: "组件",
type: "folder",
path: "/src/components",
children: [
{
name: "FileTree.js",
type: "file",
size: "7.5KB",
modified: "2023-05-17",
content: "// 文件树组件\nclass FileTree {\n  constructor(data) {\n    this.data = data;\n    this.render();\n  }\n\n  render() {\n    // 渲染文件树\n  }\n\n  // 其他方法...\n}"
},
{
name: "FilePreview.js",
type: "file",
size: "5.2KB",
modified: "2023-05-16",
content: "// 文件预览组件\nclass FilePreview {\n  constructor(file) {\n    this.file = file;\n    this.render();\n  }\n\n  render() {\n    // 根据文件类型渲染预览\n  }\n}"
}
]
}
]
},
{
name: "图片资源",
type: "folder",
path: "/assets",
children: [
{
name: "logo.png",
type: "file",
size: "45.2KB",
modified: "2023-05-10",
content: "PNG图像数据 - 无法预览文本内容"
},
{
name: "banner.jpg",
type: "file",
size: "120.5KB",
modified: "2023-05-11",
content: "JPEG图像数据 - 无法预览文本内容"
}
]
},
{
name: "配置文件",
type: "folder",
path: "/config",
children: [
{
name: "settings.json",
type: "file",
size: "0.8KB",
modified: "2023-05-14",
content: "{\n  \"theme\": \"dark\",\n  \"fontSize\": 14,\n  \"autoSave\": true,\n  \"lineNumbers\": true,\n  \"tabSize\": 2\n}"
},
{
name: "permissions.yml",
type: "file",
size: "1.1KB",
modified: "2023-05-13",
content: "# 权限配置\nadmin:\n  - read\n  - write\n  - delete\n\nuser:\n  - read\n  - write\n\nguest:\n  - read"
}
]
}
]
};

// DOM元素
const fileTree = document.getElementById('fileTree');
const fileName = document.getElementById('fileName');
const fileType = document.getElementById('fileType');
const fileSize = document.getElementById('fileSize');
const fileModified = document.getElementById('fileModified');
const previewText = document.getElementById('previewText');
const folderCount = document.getElementById('folderCount');
const fileCount = document.getElementById('fileCount');
const totalSize = document.getElementById('totalSize');
const searchInput = document.getElementById('searchInput');
const pathLinks = document.querySelector('.breadcrumb');

// 全局变量
let currentPath = '/';
let selectedFile = null;

// 渲染文件树
function renderFileTree(data, container, depth = 0) {
container.innerHTML = '';

// 计算统计信息
let folderCounter = 0;
let fileCounter = 0;
let sizeCounter = 0;

// 渲染每个项目
data.children.forEach(item => {
if (item.type === 'folder') {
folderCounter++;

const folderEl = document.createElement('div');
folderEl.className = 'folder';
folderEl.dataset.path = item.path;

const toggle = document.createElement('div');
toggle.className = 'toggle';
toggle.innerHTML = '<i class="fas fa-caret-right"></i>';

const icon = document.createElement('i');
icon.className = 'fas fa-folder';

const name = document.createElement('span');
name.className = 'name';
name.textContent = item.name;

folderEl.appendChild(toggle);
folderEl.appendChild(icon);
folderEl.appendChild(name);

// 点击文件夹
folderEl.addEventListener('click', (e) => {
e.stopPropagation();
const content = folderEl.querySelector('.folder-content');

if (content) {
// 切换展开/折叠
if (content.classList.contains('expanded')) {
content.classList.remove('expanded');
folderEl.classList.remove('expanded');
toggle.querySelector('i').style.transform = 'rotate(0deg)';
} else {
content.classList.add('expanded');
folderEl.classList.add('expanded');
toggle.querySelector('i').style.transform = 'rotate(90deg)';
}
} else {
// 第一次点击 - 加载内容
toggle.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

setTimeout(() => {
const content = document.createElement('div');
content.className = 'folder-content';

if (item.children && item.children.length > 0) {
renderFileTree(item, content, depth + 1);
} else {
content.innerHTML = '
<div class="empty-folder">空文件夹</div>';
}

folderEl.appendChild(content);
content.classList.add('expanded');
folderEl.classList.add('expanded');
toggle.innerHTML = '<i class="fas fa-caret-down"></i>';
}, 500);
}

// 更新面包屑导航
updateBreadcrumb(item.path);
currentPath = item.path;
});

container.appendChild(folderEl);
} else {
fileCounter++;
sizeCounter += parseFloat(item.size);

const fileEl = document.createElement('div');
fileEl.className = 'file';
fileEl.dataset.path = item.path;

const icon = document.createElement('i');

// 根据文件类型设置图标
if (item.name.endsWith('.html')) {
icon.className = 'fab fa-html5';
icon.style.color = '#e34f26';
} else if (item.name.endsWith('.css')) {
icon.className = 'fab fa-css3-alt';
icon.style.color = '#264de4';
} else if (item.name.endsWith('.js')) {
icon.className = 'fab fa-js';
icon.style.color = '#f7df1e';
} else if (item.name.endsWith('.json')) {
icon.className = 'fas fa-code';
icon.style.color = '#565656';
} else if (item.name.endsWith('.png') || item.name.endsWith('.jpg')) {
icon.className = 'fas fa-image';
icon.style.color = '#4CAF50';
} else {
icon.className = 'fas fa-file';
}

const name = document.createElement('span');
name.className = 'name';
name.textContent = item.name;

fileEl.appendChild(icon);
fileEl.appendChild(name);

// 点击文件
fileEl.addEventListener('click', (e) => {
e.stopPropagation();

// 移除之前选中的文件样式
document.querySelectorAll('.file, .folder').forEach(el => {
el.classList.remove('selected');
});

// 添加选中样式
fileEl.classList.add('selected');
selectedFile = item;

// 显示文件详情
showFileDetails(item);
});

container.appendChild(fileEl);
}
});

// 更新统计信息
folderCount.textContent = folderCounter;
fileCount.textContent = fileCounter;
totalSize.textContent = sizeCounter > 1024
? (sizeCounter / 1024).toFixed(1) + 'MB'
: sizeCounter.toFixed(1) + 'KB';
}

// 显示文件详情
function showFileDetails(file) {
fileName.textContent = file.name;

// 确定文件类型
if (file.name.endsWith('.html')) {
fileType.innerHTML = 'HTML 文件 <span class="file-type">.html</span>';
} else if (file.name.endsWith('.css')) {
fileType.innerHTML = 'CSS 样式表 <span class="file-type">.css</span>';
} else if (file.name.endsWith('.js')) {
fileType.innerHTML = 'JavaScript 文件 <span class="file-type">.js</span>';
} else if (file.name.endsWith('.json')) {
fileType.innerHTML = 'JSON 数据 <span class="file-type">.json</span>';
} else if (file.name.endsWith('.txt')) {
fileType.innerHTML = '文本文件 <span class="file-type">.txt</span>';
} else if (file.name.endsWith('.png') || file.name.endsWith('.jpg')) {
fileType.innerHTML = '图像文件 <span class="file-type">' + file.name.substring(file.name.lastIndexOf('.')) + '</span>';
} else if (file.name.endsWith('.pdf')) {
fileType.innerHTML = 'PDF 文档 <span class="file-type">.pdf</span>';
} else if (file.name.endsWith('.docx')) {
fileType.innerHTML = 'Word 文档 <span class="file-type">.docx</span>';
} else if (file.name.endsWith('.yml')) {
fileType.innerHTML = 'YAML 配置文件 <span class="file-type">.yml</span>';
} else {
fileType.innerHTML = '文件 <span class="file-type">未知类型</span>';
}

fileSize.textContent = file.size;
fileModified.textContent = file.modified;

// 显示文件预览
if (file.content) {
previewText.textContent = file.content;
} else {
previewText.textContent = "无法预览此文件内容";
}
}

// 更新面包屑导航
function updateBreadcrumb(path) {
pathLinks.innerHTML = '';

const parts = path.split('/').filter(part => part !== '');

let currentPath = '';
pathLinks.innerHTML = '<a href="#" class="path-link" data-path="/">根目录</a>';

parts.forEach((part, index) => {
currentPath += '/' + part;

const span = document.createElement('span');
span.textContent = '/';
pathLinks.appendChild(span);

const link = document.createElement('a');
link.href = '#';
link.className = 'path-link';
link.textContent = part;
link.dataset.path = currentPath;
pathLinks.appendChild(link);
});

// 添加面包屑点击事件
document.querySelectorAll('.path-link').forEach(link => {
link.addEventListener('click', (e) => {
e.preventDefault();
navigateToPath(link.dataset.path);
});
});
}

// 导航到指定路径
function navigateToPath(path) {
currentPath = path;

// 模拟从服务器获取路径内容
setTimeout(() => {
renderFileTree(fileStructure, fileTree);
updateBreadcrumb(path);
}, 300);
}

// 搜索功能
function setupSearch() {
searchInput.addEventListener('input', () => {
const searchTerm = searchInput.value.toLowerCase();

if (searchTerm === '') {
renderFileTree(fileStructure, fileTree);
return;
}

// 过滤文件
const filteredData = JSON.parse(JSON.stringify(fileStructure));
filterItems(filteredData, searchTerm);
renderFileTree(filteredData, fileTree);
});
}

// 递归过滤项目
function filterItems(data, term) {
if (data.children) {
data.children = data.children.filter(item => {
// 保留匹配的文件夹
if (item.type === 'folder' && item.name.toLowerCase().includes(term)) {
return true;
}

// 递归过滤子项
if (item.children) {
filterItems(item, term);
return item.children.length > 0;
}

// 保留匹配的文件
return item.name.toLowerCase().includes(term);
});
}
}

// 初始化
function init() {
// 初始渲染
renderFileTree(fileStructure, fileTree);

// 设置搜索功能
setupSearch();

// 刷新按钮
document.getElementById('refreshBtn').addEventListener('click', () => {
fileTree.innerHTML = '
<div class="loading"><i class="fas fa-spinner"></i> 正在刷新文件结构...</div>';

setTimeout(() => {
renderFileTree(fileStructure, fileTree);
updateBreadcrumb(currentPath);
}, 800);
});

// 全部展开
document.getElementById('expandAllBtn').addEventListener('click', () => {
document.querySelectorAll('.folder').forEach(folder => {
if (!folder.classList.contains('expanded')) {
folder.click();
}
});
});

// 全部折叠
document.getElementById('collapseAllBtn').addEventListener('click', () => {
document.querySelectorAll('.folder.expanded').forEach(folder => {
folder.click();
});
});
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>